<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Anish Goyal">
<meta name="dcterms.date" content="2023-02-20">

<title>Senator Voting Records Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Senator-Voting-Records-Lab_files/libs/clipboard/clipboard.min.js"></script>
<script src="Senator-Voting-Records-Lab_files/libs/quarto-html/quarto.js"></script>
<script src="Senator-Voting-Records-Lab_files/libs/quarto-html/popper.min.js"></script>
<script src="Senator-Voting-Records-Lab_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Senator-Voting-Records-Lab_files/libs/quarto-html/anchor.min.js"></script>
<link href="Senator-Voting-Records-Lab_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Senator-Voting-Records-Lab_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Senator-Voting-Records-Lab_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Senator-Voting-Records-Lab_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Senator-Voting-Records-Lab_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Senator Voting Records Lab</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Anish Goyal </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 20, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>
<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#reading-in-the-file" id="toc-reading-in-the-file">2.12.2 Reading in the file</a>
  <ul>
  <li><a href="#task-2.12.1" id="toc-task-2.12.1">Task 2.12.1</a></li>
  </ul></li>
  <li><a href="#policy-comparison" id="toc-policy-comparison">2.12.4 Policy comparison</a>
  <ul>
  <li><a href="#task-2.12.2" id="toc-task-2.12.2">Task 2.12.2</a></li>
  <li><a href="#task-2.12.3" id="toc-task-2.12.3">Task 2.12.3</a></li>
  <li><a href="#task-2.12.4" id="toc-task-2.12.4">Task 2.12.4</a></li>
  <li><a href="#task-2.12.5" id="toc-task-2.12.5">Task 2.12.5</a></li>
  <li><a href="#task-2.12.6" id="toc-task-2.12.6">Task 2.12.6</a></li>
  </ul></li>
  <li><a href="#not-your-average-democrat" id="toc-not-your-average-democrat">2.12.5 Not your average Democrat</a>
  <ul>
  <li><a href="#task-2.12.7" id="toc-task-2.12.7">Task 2.12.7</a></li>
  <li><a href="#task-2.12.8" id="toc-task-2.12.8">Task 2.12.8</a></li>
  </ul></li>
  <li><a href="#bitter-rivals" id="toc-bitter-rivals">2.12.6 Bitter Rivals</a>
  <ul>
  <li><a href="#task-2.12.9" id="toc-task-2.12.9">Task 2.12.9</a></li>
  </ul></li>
  </ul>
</nav>
<div style="page-break-after: always;"></div>
<section id="lab-comparing-voting-records-using-dot-product" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="lab-comparing-voting-records-using-dot-product"><strong>2.12 Lab: Comparing voting records using dot-product</strong></h2>
</section>
<section id="reading-in-the-file" class="level2">
<h2 class="anchored" data-anchor-id="reading-in-the-file">2.12.2 Reading in the file</h2>
<section id="task-2.12.1" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.1">Task 2.12.1</h3>
<p>Write a procedure <code>create_voting_dict(strlist)</code> that, given a list of strings (voting records from the source file), return a dictionary that maps the last name of a senator to a list of numbers representing that’s senator’s voting record. You will need to use the built-in procedure <code>int(.)</code> to convert a string representation of an integer (e.g.&nbsp;‘1’) to the actual integer (e.g.&nbsp;1).</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a>list1 <span class="op">=</span> []</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"voting_record_dump109.txt"</span>, <span class="st">'r'</span>) <span class="im">as</span> data:</span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="cf">for</span> line <span class="kw">in</span> data:</span>
<span id="cb1-4"><a href="#cb1-4"></a>    data <span class="op">=</span> line.split()</span>
<span id="cb1-5"><a href="#cb1-5"></a>    list1.append(data)</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="kw">def</span> create_voting_dict(strlist): <span class="cf">return</span> {strlist[x][<span class="dv">0</span>]: [<span class="bu">int</span>(val) <span class="cf">for</span> val <span class="kw">in</span> strlist[x][<span class="dv">3</span>:]] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(strlist))}</span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a>voting_dict <span class="op">=</span> create_voting_dict(list1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="policy-comparison" class="level2">
<h2 class="anchored" data-anchor-id="policy-comparison">2.12.4 Policy comparison</h2>
<section id="task-2.12.2" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.2">Task 2.12.2</h3>
<p>Write a procedure <code>policy_compare(sen_a, sen_b, voting_dict)</code> that, given two names of senators and a dictionary mapping senator names to lists representing voting records, returns the dot-product representing the degree of similarity between two senators’ voting policies.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">def</span> policy_compare(sen_a, sen_b, voting_dict): <span class="cf">return</span> <span class="bu">sum</span>([voting_dict[sen_a][i] <span class="op">*</span> voting_dict[sen_b][i] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(voting_dict[sen_a]))])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-2.12.3" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.3">Task 2.12.3</h3>
<p>Write a procedure <code>most_similar(sen, voting_dict)</code> that, given the name of a senator and a dictionary mapping senator names to lists representing voting records, returns the name of the senator whose political mindset is most like the input senator (excluding, of course, the input senator him/herself).</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">def</span> most_similar(sen, voting_dict): <span class="cf">return</span> <span class="bu">max</span>([(other_sen, policy_compare(sen, other_sen, voting_dict)) <span class="cf">for</span> other_sen <span class="kw">in</span> voting_dict.keys() <span class="cf">if</span> other_sen <span class="op">!=</span> sen], key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-2.12.4" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.4">Task 2.12.4</h3>
<p>Write a very similar procedure <code>least_similar(sen, voting_dict)</code> that returns the name of the senator whose voting record agrees the least with the senator whose name is <code>sen</code>.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">def</span> least_similar(sen, voting_dict): <span class="cf">return</span> <span class="bu">min</span>([(other_sen, policy_compare(sen, other_sen, voting_dict)) <span class="cf">for</span> other_sen <span class="kw">in</span> voting_dict.keys() <span class="cf">if</span> other_sen <span class="op">!=</span> sen], key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-2.12.5" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.5">Task 2.12.5</h3>
<p>Use these procedures to figure out which senator is most like Rhode Island legend Lincoln Chafee. Then use these procedures to see who disagrees the most with Pennsylvania’s Rick Santorum. Give their names.</p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="bu">print</span>(most_similar(<span class="st">'Chafee'</span>, voting_dict))</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="bu">print</span>(least_similar(<span class="st">'Santorum'</span>, voting_dict))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Jeffords
Feingold</code></pre>
</div>
</div>
</section>
<section id="task-2.12.6" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.6">Task 2.12.6</h3>
<p>How similar are the voting records of the two senators from your favorite state?</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="bu">print</span>(<span class="st">"As a dot product: "</span> <span class="op">+</span> <span class="bu">str</span>(policy_compare(<span class="st">'Sessions'</span>, <span class="st">'Shelby'</span>, voting_dict)))</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="bu">print</span>(<span class="st">"As a percent: "</span> <span class="op">+</span> <span class="bu">str</span>(policy_compare(<span class="st">'Sessions'</span>, <span class="st">'Shelby'</span>, voting_dict)<span class="op">/</span><span class="bu">len</span>(voting_dict[<span class="st">'Sessions'</span>])<span class="op">*</span><span class="dv">100</span>) <span class="op">+</span> <span class="st">"%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>As a dot product: 38
As a percent: 82.6086956521739%</code></pre>
</div>
</div>
</section>
</section>
<section id="not-your-average-democrat" class="level2">
<h2 class="anchored" data-anchor-id="not-your-average-democrat">2.12.5 Not your average Democrat</h2>
<section id="task-2.12.7" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.7">Task 2.12.7</h3>
<p>Write a procedure <code>find_average_similarity(sen, sen_set, voting_dict) that, given the name</code>sen<code>of a senator, compares that senator's voting record to the voting records of all senators whose names are in</code>sen_set`, computing a dot-product for each, and then returns the average dot-product. Use your procedure to compute which senator has the greatest average similarity with the set of Democrats (you can extract this set from the input file).</p>
<div class="cell" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">def</span> find_average_similarity(sen, sen_set, voting_dict): <span class="cf">return</span> <span class="bu">sum</span>([policy_compare(sen, other_sen, voting_dict) <span class="cf">for</span> other_sen <span class="kw">in</span> sen_set]) <span class="op">/</span> <span class="bu">len</span>(sen_set)</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a>democrats <span class="op">=</span> {list1[x][<span class="dv">0</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(list1)) <span class="cf">if</span> list1[x][<span class="dv">1</span>] <span class="op">==</span> <span class="st">'D'</span>}</span>
<span id="cb9-4"><a href="#cb9-4"></a>most_similar_democrat <span class="op">=</span> <span class="bu">max</span>([(sen, find_average_similarity(sen, democrats, voting_dict)) <span class="cf">for</span> sen <span class="kw">in</span> voting_dict.keys() <span class="cf">if</span> sen <span class="kw">in</span> democrats], key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="bu">print</span>(most_similar_democrat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>('Biden', 34.86046511627907)</code></pre>
</div>
</div>
</section>
<section id="task-2.12.8" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.8">Task 2.12.8</h3>
<p>Write a procedure <code>find_average_record(sen_set, voting_dict)</code> that, given a set of names of senators, finds the average voting record. That is, perform vector addition on the lists representing their voting records, and then divide the sum by the number of vectors. The result should be a vector. Use this procedure to compute the average voting record for the set of Democrats, and assign the result to the variable <code>average_Democrat_record</code>. Next find which senator’s voting record is most similar to the average Democrat voting record. Did you get the same result as Task 2.12.7? Can you explain?</p>
<div class="cell" data-execution_count="8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">def</span> find_average_record(sen_set, voting_dict):</span>
<span id="cb11-2"><a href="#cb11-2"></a>    count <span class="op">=</span> <span class="bu">len</span>(sen_set)</span>
<span id="cb11-3"><a href="#cb11-3"></a>    <span class="cf">return</span> [<span class="bu">sum</span>(col) <span class="op">/</span> count <span class="cf">for</span> col <span class="kw">in</span> <span class="bu">zip</span>(<span class="op">*</span>(voting_dict[sen] <span class="cf">for</span> sen <span class="kw">in</span> sen_set))]</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a>average_democrat_record <span class="op">=</span> find_average_record(democrats, voting_dict)</span>
<span id="cb11-6"><a href="#cb11-6"></a>voting_dict[<span class="st">'average'</span>] <span class="op">=</span> average_democrat_record</span>
<span id="cb11-7"><a href="#cb11-7"></a>most_similar(<span class="st">'average'</span>, voting_dict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>'Biden'</code></pre>
</div>
</div>
<p>These results are the same for the following reason:<br>
The max of all senator dot product averages is <span class="math inline">\(max\left(\frac{\sum_{i}^{N} s \cdot s_i}{N} \right)\)</span><br>
while the max of the dot product of all senators with the average senator is <span class="math inline">\(max\left(\left(\frac{\sum_{i}^{N} s_i}{N}\right) \cdot s \right)\)</span>,<br>
both of which are equal due to the Distributive Property of Vectors.</p>
</section>
</section>
<section id="bitter-rivals" class="level2">
<h2 class="anchored" data-anchor-id="bitter-rivals">2.12.6 Bitter Rivals</h2>
<section id="task-2.12.9" class="level3">
<h3 class="anchored" data-anchor-id="task-2.12.9">Task 2.12.9</h3>
<p>Write a procedure <code>bitter_rivals(voting_dict)</code> to see which two senators disagree the most.</p>
<div class="cell" data-execution_count="9">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">def</span> bitter_rivals(voting_dict):</span>
<span id="cb13-2"><a href="#cb13-2"></a>    min_sim <span class="op">=</span> <span class="bu">float</span>(<span class="st">'inf'</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a>    names <span class="op">=</span> <span class="bu">list</span>(voting_dict.keys())</span>
<span id="cb13-4"><a href="#cb13-4"></a>    num_names <span class="op">=</span> <span class="bu">len</span>(names)</span>
<span id="cb13-5"><a href="#cb13-5"></a>    rival_pair <span class="op">=</span> <span class="va">None</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_names<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb13-7"><a href="#cb13-7"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i <span class="op">+</span> <span class="dv">1</span>, num_names):</span>
<span id="cb13-8"><a href="#cb13-8"></a>            sim <span class="op">=</span> policy_compare(names[i], names[j], voting_dict)</span>
<span id="cb13-9"><a href="#cb13-9"></a>            <span class="cf">if</span> sim <span class="op">&lt;</span> min_sim:</span>
<span id="cb13-10"><a href="#cb13-10"></a>                min_sim <span class="op">=</span> sim</span>
<span id="cb13-11"><a href="#cb13-11"></a>                rival_pair <span class="op">=</span> [names[i], names[j]]</span>
<span id="cb13-12"><a href="#cb13-12"></a>    <span class="cf">return</span> [rival_pair, min_sim]</span>
<span id="cb13-13"><a href="#cb13-13"></a></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="bu">print</span>(bitter_rivals(voting_dict))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[['Feingold', 'Inhofe'], -3]</code></pre>
</div>
</div>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb15" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1"></a><span class="co">---</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="an">title:</span><span class="co"> "Senator Voting Records Lab"</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="an">author:</span><span class="co"> Anish Goyal</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="an">date:</span><span class="co"> February 20, 2023</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">    html:</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">        code-fold: true</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">        code-tools: true</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">        code-link: true</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="an">toc-depth:</span><span class="co"> 4</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="an">toc-location:</span><span class="co"> body</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="an">code-overflow:</span><span class="co"> wrap</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="an">code-line-numbers:</span><span class="co"> true </span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="an">filters:</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">   - include-code-files</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="an">editor:</span><span class="co"> </span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">  markdown: </span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">    wrap: 72</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">---</span></span>
<span id="cb15-21"><a href="#cb15-21"></a></span>
<span id="cb15-22"><a href="#cb15-22"></a>{{&lt; pagebreak &gt;}}</span>
<span id="cb15-23"><a href="#cb15-23"></a></span>
<span id="cb15-24"><a href="#cb15-24"></a><span class="fu">## **2.12 Lab: Comparing voting records using dot-product** {.unnumbered .unlisted}</span></span>
<span id="cb15-25"><a href="#cb15-25"></a></span>
<span id="cb15-26"><a href="#cb15-26"></a><span class="fu">## 2.12.2 Reading in the file</span></span>
<span id="cb15-27"><a href="#cb15-27"></a></span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="fu">### Task 2.12.1</span></span>
<span id="cb15-29"><a href="#cb15-29"></a>Write a procedure <span class="in">`create_voting_dict(strlist)`</span> that, given a list of strings (voting records from the source file), return a dictionary that maps the last name of a senator to a list of numbers representing that's senator's voting record. You will need to use the built-in procedure <span class="in">`int(.)`</span> to convert a string representation of an integer (e.g. '1') to the actual integer (e.g. 1).</span>
<span id="cb15-30"><a href="#cb15-30"></a></span>
<span id="cb15-33"><a href="#cb15-33"></a><span class="in">```{python}</span></span>
<span id="cb15-34"><a href="#cb15-34"></a>list1 <span class="op">=</span> []</span>
<span id="cb15-35"><a href="#cb15-35"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"voting_record_dump109.txt"</span>, <span class="st">'r'</span>) <span class="im">as</span> data:</span>
<span id="cb15-36"><a href="#cb15-36"></a>  <span class="cf">for</span> line <span class="kw">in</span> data:</span>
<span id="cb15-37"><a href="#cb15-37"></a>    data <span class="op">=</span> line.split()</span>
<span id="cb15-38"><a href="#cb15-38"></a>    list1.append(data)</span>
<span id="cb15-39"><a href="#cb15-39"></a></span>
<span id="cb15-40"><a href="#cb15-40"></a><span class="kw">def</span> create_voting_dict(strlist): <span class="cf">return</span> {strlist[x][<span class="dv">0</span>]: [<span class="bu">int</span>(val) <span class="cf">for</span> val <span class="kw">in</span> strlist[x][<span class="dv">3</span>:]] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(strlist))}</span>
<span id="cb15-41"><a href="#cb15-41"></a></span>
<span id="cb15-42"><a href="#cb15-42"></a>voting_dict <span class="op">=</span> create_voting_dict(list1)</span>
<span id="cb15-43"><a href="#cb15-43"></a><span class="in">```</span></span>
<span id="cb15-44"><a href="#cb15-44"></a></span>
<span id="cb15-45"><a href="#cb15-45"></a><span class="fu">## 2.12.4 Policy comparison</span></span>
<span id="cb15-46"><a href="#cb15-46"></a></span>
<span id="cb15-47"><a href="#cb15-47"></a><span class="fu">### Task 2.12.2</span></span>
<span id="cb15-48"><a href="#cb15-48"></a>Write a procedure <span class="in">`policy_compare(sen_a, sen_b, voting_dict)`</span> that, given two names of senators and a dictionary mapping senator names to lists representing voting records, returns the dot-product representing the degree of similarity between two senators' voting policies.</span>
<span id="cb15-49"><a href="#cb15-49"></a></span>
<span id="cb15-52"><a href="#cb15-52"></a><span class="in">```{python}</span></span>
<span id="cb15-53"><a href="#cb15-53"></a><span class="kw">def</span> policy_compare(sen_a, sen_b, voting_dict): <span class="cf">return</span> <span class="bu">sum</span>([voting_dict[sen_a][i] <span class="op">*</span> voting_dict[sen_b][i] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(voting_dict[sen_a]))])</span>
<span id="cb15-54"><a href="#cb15-54"></a><span class="in">```</span></span>
<span id="cb15-55"><a href="#cb15-55"></a></span>
<span id="cb15-56"><a href="#cb15-56"></a><span class="fu">### Task 2.12.3</span></span>
<span id="cb15-57"><a href="#cb15-57"></a>Write a procedure <span class="in">`most_similar(sen, voting_dict)`</span> that, given the name of a senator and a dictionary mapping senator names to lists representing voting records, returns the name of the senator whose political mindset is most like the input senator (excluding, of course, the input senator him/herself). </span>
<span id="cb15-58"><a href="#cb15-58"></a></span>
<span id="cb15-61"><a href="#cb15-61"></a><span class="in">```{python}</span></span>
<span id="cb15-62"><a href="#cb15-62"></a><span class="kw">def</span> most_similar(sen, voting_dict): <span class="cf">return</span> <span class="bu">max</span>([(other_sen, policy_compare(sen, other_sen, voting_dict)) <span class="cf">for</span> other_sen <span class="kw">in</span> voting_dict.keys() <span class="cf">if</span> other_sen <span class="op">!=</span> sen], key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])[<span class="dv">0</span>]</span>
<span id="cb15-63"><a href="#cb15-63"></a><span class="in">```</span></span>
<span id="cb15-64"><a href="#cb15-64"></a></span>
<span id="cb15-65"><a href="#cb15-65"></a><span class="fu">### Task 2.12.4</span></span>
<span id="cb15-66"><a href="#cb15-66"></a>Write a very similar procedure <span class="in">`least_similar(sen, voting_dict)`</span> that returns the name of the senator whose voting record agrees the least with the senator whose name is <span class="in">`sen`</span>.</span>
<span id="cb15-67"><a href="#cb15-67"></a></span>
<span id="cb15-70"><a href="#cb15-70"></a><span class="in">```{python}</span></span>
<span id="cb15-71"><a href="#cb15-71"></a><span class="kw">def</span> least_similar(sen, voting_dict): <span class="cf">return</span> <span class="bu">min</span>([(other_sen, policy_compare(sen, other_sen, voting_dict)) <span class="cf">for</span> other_sen <span class="kw">in</span> voting_dict.keys() <span class="cf">if</span> other_sen <span class="op">!=</span> sen], key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])[<span class="dv">0</span>]</span>
<span id="cb15-72"><a href="#cb15-72"></a><span class="in">```</span></span>
<span id="cb15-73"><a href="#cb15-73"></a></span>
<span id="cb15-74"><a href="#cb15-74"></a><span class="fu">### Task 2.12.5</span></span>
<span id="cb15-75"><a href="#cb15-75"></a>Use these procedures to figure out which senator is most like Rhode Island legend Lincoln Chafee. Then use these procedures to see who disagrees the most with Pennsylvania's Rick Santorum. Give their names. </span>
<span id="cb15-76"><a href="#cb15-76"></a></span>
<span id="cb15-79"><a href="#cb15-79"></a><span class="in">```{python}</span></span>
<span id="cb15-80"><a href="#cb15-80"></a><span class="bu">print</span>(most_similar(<span class="st">'Chafee'</span>, voting_dict))</span>
<span id="cb15-81"><a href="#cb15-81"></a><span class="bu">print</span>(least_similar(<span class="st">'Santorum'</span>, voting_dict))</span>
<span id="cb15-82"><a href="#cb15-82"></a><span class="in">```</span></span>
<span id="cb15-83"><a href="#cb15-83"></a></span>
<span id="cb15-84"><a href="#cb15-84"></a><span class="fu">### Task 2.12.6</span></span>
<span id="cb15-85"><a href="#cb15-85"></a>How similar are the voting records of the two senators from your favorite state?</span>
<span id="cb15-86"><a href="#cb15-86"></a></span>
<span id="cb15-89"><a href="#cb15-89"></a><span class="in">```{python}</span></span>
<span id="cb15-90"><a href="#cb15-90"></a><span class="bu">print</span>(<span class="st">"As a dot product: "</span> <span class="op">+</span> <span class="bu">str</span>(policy_compare(<span class="st">'Sessions'</span>, <span class="st">'Shelby'</span>, voting_dict)))</span>
<span id="cb15-91"><a href="#cb15-91"></a><span class="bu">print</span>(<span class="st">"As a percent: "</span> <span class="op">+</span> <span class="bu">str</span>(policy_compare(<span class="st">'Sessions'</span>, <span class="st">'Shelby'</span>, voting_dict)<span class="op">/</span><span class="bu">len</span>(voting_dict[<span class="st">'Sessions'</span>])<span class="op">*</span><span class="dv">100</span>) <span class="op">+</span> <span class="st">"%"</span>)</span>
<span id="cb15-92"><a href="#cb15-92"></a><span class="in">```</span></span>
<span id="cb15-93"><a href="#cb15-93"></a></span>
<span id="cb15-94"><a href="#cb15-94"></a><span class="fu">## 2.12.5 Not your average Democrat</span></span>
<span id="cb15-95"><a href="#cb15-95"></a></span>
<span id="cb15-96"><a href="#cb15-96"></a><span class="fu">### Task 2.12.7</span></span>
<span id="cb15-97"><a href="#cb15-97"></a>Write a procedure <span class="in">`find_average_similarity(sen, sen_set, voting_dict) that, given the name `</span>sen<span class="in">` of a senator, compares that senator's voting record to the voting records of all senators whose names are in `</span>sen_set`, computing a dot-product for each, and then returns the average dot-product. Use your procedure to compute which senator has the greatest average similarity with the set of Democrats (you can extract this set from the input file).</span>
<span id="cb15-98"><a href="#cb15-98"></a></span>
<span id="cb15-101"><a href="#cb15-101"></a><span class="in">```{python}</span></span>
<span id="cb15-102"><a href="#cb15-102"></a><span class="kw">def</span> find_average_similarity(sen, sen_set, voting_dict): <span class="cf">return</span> <span class="bu">sum</span>([policy_compare(sen, other_sen, voting_dict) <span class="cf">for</span> other_sen <span class="kw">in</span> sen_set]) <span class="op">/</span> <span class="bu">len</span>(sen_set)</span>
<span id="cb15-103"><a href="#cb15-103"></a></span>
<span id="cb15-104"><a href="#cb15-104"></a>democrats <span class="op">=</span> {list1[x][<span class="dv">0</span>] <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(list1)) <span class="cf">if</span> list1[x][<span class="dv">1</span>] <span class="op">==</span> <span class="st">'D'</span>}</span>
<span id="cb15-105"><a href="#cb15-105"></a>most_similar_democrat <span class="op">=</span> <span class="bu">max</span>([(sen, find_average_similarity(sen, democrats, voting_dict)) <span class="cf">for</span> sen <span class="kw">in</span> voting_dict.keys() <span class="cf">if</span> sen <span class="kw">in</span> democrats], key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>])</span>
<span id="cb15-106"><a href="#cb15-106"></a></span>
<span id="cb15-107"><a href="#cb15-107"></a><span class="bu">print</span>(most_similar_democrat)</span>
<span id="cb15-108"><a href="#cb15-108"></a><span class="in">```</span></span>
<span id="cb15-109"><a href="#cb15-109"></a></span>
<span id="cb15-110"><a href="#cb15-110"></a><span class="fu">### Task 2.12.8</span></span>
<span id="cb15-111"><a href="#cb15-111"></a>Write a procedure <span class="in">`find_average_record(sen_set, voting_dict)`</span> that, given a set of names of senators, finds the average voting record. That is, perform vector addition on the lists representing their voting records, and then divide the sum by the number of vectors. The result should be a vector. Use this procedure to compute the average voting record for the set of Democrats, and assign the result to the variable <span class="in">`average_Democrat_record`</span>. Next find which senator's voting record is most similar to the average Democrat voting record. Did you get the same result as Task 2.12.7? Can you explain?</span>
<span id="cb15-112"><a href="#cb15-112"></a></span>
<span id="cb15-115"><a href="#cb15-115"></a><span class="in">```{python}</span></span>
<span id="cb15-116"><a href="#cb15-116"></a><span class="kw">def</span> find_average_record(sen_set, voting_dict):</span>
<span id="cb15-117"><a href="#cb15-117"></a>    count <span class="op">=</span> <span class="bu">len</span>(sen_set)</span>
<span id="cb15-118"><a href="#cb15-118"></a>    <span class="cf">return</span> [<span class="bu">sum</span>(col) <span class="op">/</span> count <span class="cf">for</span> col <span class="kw">in</span> <span class="bu">zip</span>(<span class="op">*</span>(voting_dict[sen] <span class="cf">for</span> sen <span class="kw">in</span> sen_set))]</span>
<span id="cb15-119"><a href="#cb15-119"></a></span>
<span id="cb15-120"><a href="#cb15-120"></a>average_democrat_record <span class="op">=</span> find_average_record(democrats, voting_dict)</span>
<span id="cb15-121"><a href="#cb15-121"></a>voting_dict[<span class="st">'average'</span>] <span class="op">=</span> average_democrat_record</span>
<span id="cb15-122"><a href="#cb15-122"></a>most_similar(<span class="st">'average'</span>, voting_dict)</span>
<span id="cb15-123"><a href="#cb15-123"></a><span class="in">```</span></span>
<span id="cb15-124"><a href="#cb15-124"></a>These results are the same for the following reason: \</span>
<span id="cb15-125"><a href="#cb15-125"></a>The max of all senator dot product averages is $max\left(\frac{\sum_{i}^{N} s \cdot s_i}{N} \right)$ \</span>
<span id="cb15-126"><a href="#cb15-126"></a>while the max of the dot product of all senators with the average senator is $max\left(\left(\frac{\sum_{i}^{N} s_i}{N}\right) \cdot s \right)$, \</span>
<span id="cb15-127"><a href="#cb15-127"></a>both of which are equal due to the Distributive Property of Vectors.</span>
<span id="cb15-128"><a href="#cb15-128"></a></span>
<span id="cb15-129"><a href="#cb15-129"></a><span class="fu">## 2.12.6 Bitter Rivals</span></span>
<span id="cb15-130"><a href="#cb15-130"></a></span>
<span id="cb15-131"><a href="#cb15-131"></a><span class="fu">### Task 2.12.9</span></span>
<span id="cb15-132"><a href="#cb15-132"></a>Write a procedure <span class="in">`bitter_rivals(voting_dict)`</span> to see which two senators disagree the most.</span>
<span id="cb15-133"><a href="#cb15-133"></a></span>
<span id="cb15-136"><a href="#cb15-136"></a><span class="in">```{python}</span></span>
<span id="cb15-137"><a href="#cb15-137"></a><span class="kw">def</span> bitter_rivals(voting_dict):</span>
<span id="cb15-138"><a href="#cb15-138"></a>    min_sim <span class="op">=</span> <span class="bu">float</span>(<span class="st">'inf'</span>)</span>
<span id="cb15-139"><a href="#cb15-139"></a>    names <span class="op">=</span> <span class="bu">list</span>(voting_dict.keys())</span>
<span id="cb15-140"><a href="#cb15-140"></a>    num_names <span class="op">=</span> <span class="bu">len</span>(names)</span>
<span id="cb15-141"><a href="#cb15-141"></a>    rival_pair <span class="op">=</span> <span class="va">None</span></span>
<span id="cb15-142"><a href="#cb15-142"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_names<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb15-143"><a href="#cb15-143"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i <span class="op">+</span> <span class="dv">1</span>, num_names):</span>
<span id="cb15-144"><a href="#cb15-144"></a>            sim <span class="op">=</span> policy_compare(names[i], names[j], voting_dict)</span>
<span id="cb15-145"><a href="#cb15-145"></a>            <span class="cf">if</span> sim <span class="op">&lt;</span> min_sim:</span>
<span id="cb15-146"><a href="#cb15-146"></a>                min_sim <span class="op">=</span> sim</span>
<span id="cb15-147"><a href="#cb15-147"></a>                rival_pair <span class="op">=</span> [names[i], names[j]]</span>
<span id="cb15-148"><a href="#cb15-148"></a>    <span class="cf">return</span> [rival_pair, min_sim]</span>
<span id="cb15-149"><a href="#cb15-149"></a></span>
<span id="cb15-150"><a href="#cb15-150"></a><span class="bu">print</span>(bitter_rivals(voting_dict))</span>
<span id="cb15-151"><a href="#cb15-151"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>